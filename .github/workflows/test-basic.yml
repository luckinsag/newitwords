name: 🧪 基础测试工作流

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: 📥 检出代码
      uses: actions/checkout@v4
      
    - name: 🎯 基础测试
      run: |
        echo "🎯 GitHub Actions 基础测试开始..."
        echo "================================================="
        echo "📅 当前时间: $(date)"
        echo "🖥️ 运行环境: $(uname -a)"
        echo "📁 当前目录: $(pwd)"
        echo "================================================="
        
    - name: 📂 检查项目结构
      run: |
        echo "📂 检查项目根目录..."
        ls -la
        echo ""
        echo "📊 项目统计信息:"
        echo "文件总数: $(find . -type f | wc -l)"
        echo "目录总数: $(find . -type d | wc -l)"
        
    - name: 🔍 检查 GitHub Secrets
      run: |
        echo "🔍 检查 GitHub Secrets 配置状态..."
        if [ -n "${{ secrets.AWS_ACCESS_KEY_ID }}" ]; then
          echo "✅ AWS_ACCESS_KEY_ID 已配置"
        else
          echo "❌ AWS_ACCESS_KEY_ID 未配置"
        fi
        
        if [ -n "${{ secrets.AWS_SECRET_ACCESS_KEY }}" ]; then
          echo "✅ AWS_SECRET_ACCESS_KEY 已配置"
        else
          echo "❌ AWS_SECRET_ACCESS_KEY 未配置"
        fi
        
        if [ -n "${{ secrets.AWS_REGION }}" ]; then
          echo "✅ AWS_REGION 已配置: ${{ secrets.AWS_REGION }}"
        else
          echo "❌ AWS_REGION 未配置"
        fi
        
        if [ -n "${{ secrets.S3_BUCKET }}" ]; then
          echo "✅ S3_BUCKET 已配置: ${{ secrets.S3_BUCKET }}"
        else
          echo "❌ S3_BUCKET 未配置"
        fi
        
        if [ -n "${{ secrets.EC2_HOST }}" ]; then
          echo "✅ EC2_HOST 已配置: ${{ secrets.EC2_HOST }}"
        else
          echo "❌ EC2_HOST 未配置"
        fi
        
        if [ -n "${{ secrets.EC2_PRIVATE_KEY }}" ]; then
          echo "✅ EC2_PRIVATE_KEY 已配置"
        else
          echo "❌ EC2_PRIVATE_KEY 未配置"
        fi
        
    - name: 🎉 测试完成
      run: |
        echo "🎉 基础测试完成！"
        echo "================================================="
        echo "如果你能看到这些日志，说明 GitHub Actions 工作正常"
        echo "问题可能在于主部署工作流的复杂性或 Secrets 配置"
        echo "=================================================" 