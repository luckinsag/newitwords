name: ğŸ§ª åŸºç¡€æµ‹è¯•å·¥ä½œæµ

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      
    - name: ğŸ¯ åŸºç¡€æµ‹è¯•
      run: |
        echo "ğŸ¯ GitHub Actions åŸºç¡€æµ‹è¯•å¼€å§‹..."
        echo "================================================="
        echo "ğŸ“… å½“å‰æ—¶é—´: $(date)"
        echo "ğŸ–¥ï¸ è¿è¡Œç¯å¢ƒ: $(uname -a)"
        echo "ğŸ“ å½“å‰ç›®å½•: $(pwd)"
        echo "================================================="
        
    - name: ğŸ“‚ æ£€æŸ¥é¡¹ç›®ç»“æ„
      run: |
        echo "ğŸ“‚ æ£€æŸ¥é¡¹ç›®æ ¹ç›®å½•..."
        ls -la
        echo ""
        echo "ğŸ“Š é¡¹ç›®ç»Ÿè®¡ä¿¡æ¯:"
        echo "æ–‡ä»¶æ€»æ•°: $(find . -type f | wc -l)"
        echo "ç›®å½•æ€»æ•°: $(find . -type d | wc -l)"
        
    - name: ğŸ” æ£€æŸ¥ GitHub Secrets
      run: |
        echo "ğŸ” æ£€æŸ¥ GitHub Secrets é…ç½®çŠ¶æ€..."
        if [ -n "${{ secrets.AWS_ACCESS_KEY_ID }}" ]; then
          echo "âœ… AWS_ACCESS_KEY_ID å·²é…ç½®"
        else
          echo "âŒ AWS_ACCESS_KEY_ID æœªé…ç½®"
        fi
        
        if [ -n "${{ secrets.AWS_SECRET_ACCESS_KEY }}" ]; then
          echo "âœ… AWS_SECRET_ACCESS_KEY å·²é…ç½®"
        else
          echo "âŒ AWS_SECRET_ACCESS_KEY æœªé…ç½®"
        fi
        
        if [ -n "${{ secrets.AWS_REGION }}" ]; then
          echo "âœ… AWS_REGION å·²é…ç½®: ${{ secrets.AWS_REGION }}"
        else
          echo "âŒ AWS_REGION æœªé…ç½®"
        fi
        
        if [ -n "${{ secrets.S3_BUCKET }}" ]; then
          echo "âœ… S3_BUCKET å·²é…ç½®: ${{ secrets.S3_BUCKET }}"
        else
          echo "âŒ S3_BUCKET æœªé…ç½®"
        fi
        
        if [ -n "${{ secrets.EC2_HOST }}" ]; then
          echo "âœ… EC2_HOST å·²é…ç½®: ${{ secrets.EC2_HOST }}"
        else
          echo "âŒ EC2_HOST æœªé…ç½®"
        fi
        
        if [ -n "${{ secrets.EC2_PRIVATE_KEY }}" ]; then
          echo "âœ… EC2_PRIVATE_KEY å·²é…ç½®"
        else
          echo "âŒ EC2_PRIVATE_KEY æœªé…ç½®"
        fi
        
    - name: ğŸ‰ æµ‹è¯•å®Œæˆ
      run: |
        echo "ğŸ‰ åŸºç¡€æµ‹è¯•å®Œæˆï¼"
        echo "================================================="
        echo "å¦‚æœä½ èƒ½çœ‹åˆ°è¿™äº›æ—¥å¿—ï¼Œè¯´æ˜ GitHub Actions å·¥ä½œæ­£å¸¸"
        echo "é—®é¢˜å¯èƒ½åœ¨äºä¸»éƒ¨ç½²å·¥ä½œæµçš„å¤æ‚æ€§æˆ– Secrets é…ç½®"
        echo "=================================================" 